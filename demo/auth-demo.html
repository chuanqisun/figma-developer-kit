<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">
  <title>OAuth2 Demo</title>
  <script src="https://unpkg.com/figma-development-kit@^1/dist/fdk.umd.js"></script>
</head>

<body>
  <button class="js-login-button">login</button>
  <button class="js-reset-button">reset cache</button>
  <output class="js-token"></output>

  <script>
    const figmaApi = new fdk.FigmaApi({
      clientId: 'd6HPfFabvUgC73Y9MSsRy6',
      clientSecrete: 'U7zKxVvYBqoOJD9tH7pFPUEveqjK7X',
      redirectUri: 'https://chuanqisun.github.io/figma-development-kit/dist/callback.html',
    });

    document.querySelector('.js-login-button').onclick = () => figmaApi.getOAuth2Token().then(token => {
      /* display the token in the UI */
      document.querySelector('.js-token').textContent = token;
    });

    document.querySelector('.js-reset-button').onclick = () => {
      /* reset local storage will force user to re-authroize */
      localStorage.clear();
      document.querySelector('.js-token').textContent = '';
    }
  </script>
</body>
</html>